---
title: Mysql如何实现读写分离？
date: 2021-01-15 15:04:22
tags: [面试, 数据库]
category: [面试, 数据库]
---

# Mycat

Mycat原理MyCAT主要是通过对SQL的拦截，然后经过一定规则的分片解析、路由分析、读写分离分析、缓存分析等，然后将SQL发给后端真实的数据块，并将返回的结果做适当处理返回给客户端。特点：第三方客户端，反向代理。

# SpringBoot动态切换数据源

动态切换数据源，根据配置的文件，业务动态切换访问的数据库。此方案通过Spring的AOP、AspactJ来实现动态织入，通过编程继承实现Spring中的AbstractRoutingDataSource，来实现数据库访问的动态切换，不仅可以方便扩展，不影响现有程序，而且对于此功能的增删也比较容易。


在Spring 2.0+中引入了AbstractRoutingDataSource, 该类充当了DataSource的路由中介。能有在运行时, 根据某种key值来动态切换到真正的DataSource上。

1. 项目中需要集成多个数据源分别为读和写的数据源，绑定不同的key；
2. 采用AOP技术进行拦截业务逻辑层方法，判断方法的前缀是否需要写或者读的操作；
3. 如果方法的前缀是写的操作的时候直接切换为写的数据源，反之切换为读的数据源也可以自己定义注解进行封装。
